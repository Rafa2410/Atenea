{% extends 'base.html.twig' %}

{% block title %}Unidades de gestion{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
    .mt-15 { margin-top: 15px !important; }
    .mb-15 { margin-bottom: 15px !important; }
</style>
    <h1>{{ unidad.nombre }}</h1>
    <p>{{ unidad.descripcion }}</p>
    <div class="divider"></div>
    <div class="row">      
        <ul class="tabs">
          <li class="tab col s3"><a href="#empresas">Empresas</a></li>
          <li class="tab col s3"><a href="#emplazamientos">Emplazamientos</a></li>
          <li class="tab col s3"><a href="#superusuarios">SuperUsuarios</a></li>
          <li class="tab col s3"><a href="#contrato">Contrato</a></li>
        </ul>
      </div>
      <div id="empresas" class="col s12">
        {% if empresas %}
          <table id="empresas">
            <thead>
                <tr>
                  <th>Nombre</th>
                  <th>Descripción</th>
                  <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
          {% for empresa in empresas %}
            {% if empresa.tipo == 2 %}
              <tr>
                  <td>{{ empresa.nombre }}</td>
                  <td>{{ empresa.descripcion }}</td>
                  <td>                      
                      <a href="{{ path('unidad_edit', {'id': empresa.id}) }}" class="btn-floating"><i class="material-icons">edit</i></a>
                      <a href="{{ path('unidad_delete', {'id': empresa.id}) }}" class="btn-floating red darken-1"><i class="material-icons">delete</i></a>
                  </td>
              </tr>  
            {% endif %}
          {% endfor %}
            </tbody>
          </table>
        {% else %}
          <p>No hay empresas asignadas a esta corporación</p>
        {% endif %}
      </div>
      <div id="emplazamientos" class="col s12">
        {% if empresas %}
          <table id="emplazamiento">
            <thead>
                <tr>
                  <th>Nombre</th>
                  <th>Descripción</th>
                  <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
          {% for emplazamiento in empresas %}
            {% if emplazamiento.tipo == 3 %}
              <tr>
                  <td>{{ emplazamiento.nombre }}</td>
                  <td>{{ emplazamiento.descripcion }}</td>
                  <td>                      
                      <a href="{{ path('unidad_edit', {'id': emplazamiento.id}) }}" class="btn-floating"><i class="material-icons">edit</i></a>
                      <a href="{{ path('unidad_delete', {'id': emplazamiento.id}) }}" class="btn-floating red darken-1"><i class="material-icons">delete</i></a>
                  </td>
              </tr>  
            {% endif %}
          {% endfor %}
            </tbody>
          </table>
        {% else %}
            <p>No hay emplazamientos asignados a esta corporación</p>
        {% endif %}
      </div>
      <div id="superusuarios" class="col s12">Tab 3 Content</div>
      <div id="contrato" class="col s12">
        {% if contrato %}
          <p><b>Descripción : </b> {{ contrato[0].descripcion }}</p>
          <p><b>Fecha alta : </b>{{ contrato[0].fechaalta|date("d/m/Y") }}</p>
          <p><b>Fecha baja : </b>{{ contrato[0].fechabaja|date("d/m/Y") }}</p>
          <a href="{{ path('contrato_edit', {'id': contrato[0].id}) }}" class="btn">Editar contrato</a>
        {% else %}
          <div class="center-align">
            <h4>No exite ningún contrato todavía</h4> 
            <a href="{{ path('nuevo_contrato') }}" class="btn">Crear contrato</a>
          </div>
        {% endif %}
      </div>
    <div class="divider mt-15 mb-15"></div>
    <a href="/Atenea/public/index.php/unidad" class="btn light-blue lighten-1">Volver</a>    
{% endblock %}

{% block javascripts %}          
    <script type="text/javascript" src="{{ '../../js/unidad.js' }}"></script>
{% endblock %}